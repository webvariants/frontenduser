<?

WV_Redaxo::p(
	'Attribute sind die Eigenschaften, die Sie Ihren Benutzern zuweisen können. Hier '.
	'legen Sie fest, welche Attribute es gibt und wie diese gestaltet werden sollen. '.
	'Bitte beachten Sie, dass die Felder &quot;Login&quot; und &quot;Passwort&quot; '.
	'fest im System integriert sind und daher nicht geändert werden können.'
);

$base  = 'index.php?page=frontenduser&amp;subpage=attributes&amp;func=';
$id    = '<a href="'.$base.'add"><img src="include/addons/frontenduser/images/attribute_add.png" alt="" title="Hinzufügen" /></a>';
$table = new WV_Table('attributes');
$table->addColumn(new WV_Table_Column($id, '', 'id', array('class' => 'rex-icon')));
$table->addColumn(new WV_Table_Column('Attributename'));
$table->addColumn(new WV_Table_Column('Feldtyp'));
$table->addColumn(new WV_Table_Column('Feldbezeichnung'));

$table->setIsEmpty(empty($attributes));
$table->setEmptyNotice('Sie haben noch keine Attribute angelegt.');
$table->enableDragAndDrop(count($attributes) > 1);
$table->setDragAndDropHandler('wv16.handleTableDrop');
$table->enableSearching(true);

$table->renderHeader($total);

foreach ($attributes as $attr) {
	$icon = WV_Datatype::call($attr->getDatatypeID(), 'getIconURL', array());

	if (empty($icon)) {
		$icon = 'include/addons/frontenduser/images/attribute.png';
	}

	?>
	<tr id="attr<?= $attr->getID() ?>">
		<td class="rex-icon"><a href="<?= $base ?>edit&amp;id=<?= $attr->getID() ?>"><img src="<?= $icon ?>" alt="" title="Attribut bearbeiten" /></a></td>
		<td><a href="<?= $base ?>edit&amp;id=<?= $attr->getID() ?>"><?= wv_html($attr->getName()) ?></a></td>
		<td><?= rex_translate(WV_Datatype::getTitle($attr->getDatatypeID())) ?></td>
		<td><?= wv_html($attr->getTitle()) ?></td>
	</tr>
	<?
}

$table->renderFooter();
