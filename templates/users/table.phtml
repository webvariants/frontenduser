<?php
/*
 * Copyright (c) 2010, webvariants GbR, http://www.webvariants.de
 *
 * This file is released under the terms of the MIT license. You can find the
 * complete text in the attached LICENSE file or online at:
 *
 * http://www.opensource.org/licenses/mit-license.php
 */

WV_Sally::p('Die folgenden Benutzer sind auf Ihrer Website registriert.');

$id      = '<a href="index.php?page=frontenduser&amp;func=add"><img src="../data/dyn/public/frontenduser/images/user_add.png" alt="" title="HinzufÃ¼gen" /></a>';
$table   = new sly_Table('users');
$columns = WV8_Settings::getValue('frontenduser', 'be_columns', array());

$table->addColumn(new sly_Table_Column($id, '', 'id', array('class' => 'rex-icon')));
$table->addColumn(new sly_Table_Column('Loginname', '', 'login'));

foreach ($columns as $title) {
	$table->addColumn(new sly_Table_Column($title));
}

$table->addColumn(new sly_Table_Column('registriert am', '', 'registered'));

$table->setIsEmpty(empty($users));
$table->setEmptyNotice('Es haben sich noch keine Benutzer angemeldet.');
$table->enableSearching(true);
$table->enableSorting(true);

$table->renderHeader($total);

foreach ($users as $user) {
	?>
	<tr>
		<td class="rex-icon"><a href="index.php?page=frontenduser&amp;func=edit&amp;id=<?= $user->getID() ?>"><img src="../data/dyn/public/frontenduser/images/user.png" alt="" title="Benutzer bearbeiten" /></a></td>
		<td><a href="index.php?page=frontenduser&amp;func=edit&amp;id=<?= $user->getID() ?>"><?= sly_html($user->getLogin()) ?></a></td>

		<? foreach ($columns as $name => $title): ?>
		<td><?= sly_html($user->getValue($name)->getValue()) ?></td>
		<? endforeach ?>

		<td><?= sly_html(strftime('%d.%m.%Y um %H:%M Uhr', strtotime($user->getRegistered()))) ?></td>
	</tr>
	<?
}

$table->renderFooter();
