<?

WV_Redaxo::p('Die folgenden Benutzer sind auf Ihrer Website registriert.');

$id    = '<a href="index.php?page=frontenduser&amp;func=add"><img src="include/addons/frontenduser/images/user_add.png" alt="" title="HinzufÃ¼gen" /></a>';
$table = new WV_Table('users');
$table->addColumn(new WV_Table_Column($id, '', 'id', array('class' => 'rex-icon')));
$table->addColumn(new WV_Table_Column('Loginname', '', 'login'));
$table->addColumn(new WV_Table_Column('Gruppe(n)'));
$table->addColumn(new WV_Table_Column('registriert am', '', 'registered'));

$table->setIsEmpty(empty($users));
$table->setEmptyNotice('Es haben sich noch keine Benutzer angemeldet.');
$table->enableSearching(true);
$table->enableSorting(true);

$table->renderHeader($total);

foreach ($users as $user) {
	?>
	<tr>
		<td class="rex-icon"><a href="index.php?page=frontenduser&amp;func=edit&amp;id=<?= $user->getID() ?>"><img src="include/addons/frontenduser/images/user.png" alt="" title="Benutzer bearbeiten" /></a></td>
		<td><a href="index.php?page=frontenduser&amp;func=edit&amp;id=<?= $user->getID() ?>"><?= wv_html($user->getLogin()) ?></a></td>
		<td><?
			$groups = array();
			foreach ($user->getGroups() as $g) $groups[] = $g->getTitle();
			print wv_html(implode(', ', $groups));
		?></td>
		<td><?= wv_html(strftime('%d.%m.%Y um %H:%M Uhr', strtotime($user->getRegistered()))) ?></td>
	</tr>
	<?
}

$table->renderFooter();
